# 開発ガイドライン

## ⚠️ 重要なルール

### Git ワークフローについて

**AI アシスタントによる自動コミット・プッシュは禁止（許可制）**

このプロジェクトでは、以下のワークフローを採用しています：

1. **ブランチ作成**: 機能ごとに必ず新しいブランチを作成（mainブランチで直接作業しない）
2. **実装**: コード変更を行う
3. **変更報告**: 変更内容を説明し、コミット・プッシュの許可を求める
4. **許可待ち**: ユーザーが「お願いします」「OK」などと承認するまで待機
5. **コミット・プッシュ**: 承認後、コミット・プッシュを実行
6. **PR作成**: Pull Requestを作成（承認された場合）
7. **マージ**: PRレビュー後、mainブランチにマージ

### AI アシスタントに期待すること

✅ **常に実施してOK:**
- ブランチの作成 (`git checkout -b feature/xxx`)
- ファイルの作成・編集
- 変更内容の説明
- エラーチェック

⚠️ **許可を得てから実施:**
- `git add`
- `git commit`
- `git push`
- Pull Requestの作成

**重要ルール**: 
1. **mainブランチで直接作業しない**: 新しい機能や変更を実装する前に、必ず新しいブランチを作成すること
2. **実装完了後の確認**: 実装完了後は、必ず「コミット・プッシュしてもよろしいですか？」と確認を取ること
3. **承認後の実行**: ユーザーが「お願いします」「OK」「やって」などと承認した場合のみ実行する

### ブランチ命名規則

- 新機能: `feature/機能名`
- バグ修正: `fix/修正内容`
- ドキュメント: `docs/内容`
- リファクタリング: `refactor/内容`

例:
- `feature/firebase-setup`
- `feature/timer-component`
- `fix/timer-sync-issue`
- `docs/api-documentation`

## コミットメッセージ規則

Conventional Commits形式を推奨:

```
type(scope): subject

body (optional)
```

### Type
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの意味に影響しない変更（空白、フォーマット等）
- `refactor`: リファクタリング
- `test`: テストの追加・修正
- `chore`: ビルドプロセスやツールの変更

例:
```
feat(timer): Add countdown timer component
fix(sync): Fix real-time synchronization delay
docs: Update implementation plan
```

## Pull Request ガイドライン

### PR作成時
- **タイトルは日本語で記載**: 簡潔に機能を説明
- **英語プレフィックスも可**: `type: 変更内容` 形式も推奨
- 説明欄に変更内容の詳細を記載
- 関連するIssueがあればリンク

### タイトル記法

**パターン1: 英語プレフィックス（推奨）**
```
type: 変更内容の概要
```

Type:
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードフォーマット
- `refactor`: リファクタリング
- `test`: テストの追加・修正
- `chore`: その他の変更

例:
```
feat: タイマー作成機能を実装
fix: リアルタイム同期の遅延を修正
docs: Firebase Firestore実装に合わせて要件とREADMEを更新
```

**パターン2: 日本語カテゴリ**
```
カテゴリ: 変更内容の概要
```

例:
```
新機能: タイマー作成機能を実装
修正: リアルタイム同期の遅延を修正
ドキュメント更新: 実装計画を追加
```

### PRテンプレート（任意）
```markdown
## 変更内容
- 

## 確認事項
- [ ] ローカルでテスト済み
- [ ] ビルドエラーなし
- [ ] 既存機能に影響なし

## スクリーンショット（UI変更がある場合）

```

## コーディング規約

### TypeScript
- 型定義を明示的に記述
- `any`の使用は極力避ける
- interfaceまたはtypeで型を定義

### React
- 関数コンポーネントを使用
- hooksを活用
- コンポーネントは単一責任の原則に従う

### ファイル・フォルダ構成
```
src/
  components/    # Reactコンポーネント
  hooks/         # カスタムフック
  services/      # ビジネスロジック・API
  config/        # 設定ファイル
  utils/         # ユーティリティ関数
  types/         # 型定義
  pages/         # ページコンポーネント
```

## 開発の進め方

1. **Issue作成**（必要に応じて）
2. **ブランチ作成**（必須 - mainブランチで直接作業しない）
   ```bash
   git checkout -b feature/機能名
   ```
3. **実装**
4. **ローカルテスト**
   ```bash
   npm run dev  # 開発サーバーで動作確認
   npm run build  # ビルド確認
   ```
5. **承認依頼** - AIアシスタントが変更内容を報告し、コミット・プッシュの許可を求める
6. **承認** - ユーザーが「お願いします」などと承認
7. **コミット＆Push** - AIアシスタントが実行
8. **PR作成** - AIアシスタントまたは手動で作成
9. **レビュー・修正**
10. **マージ**

## その他

- `npm run dev`で開発サーバー起動
- `npm run build`でビルド確認
- ESLintエラーは解決してからコミット
- **mainブランチで直接コミットしない**（重要）
