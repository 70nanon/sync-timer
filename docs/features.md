# 機能仕様書

## コア機能

### 1. タイマー機能

#### 1.1 基本タイマー
- **時間設定**: 分・秒単位で設定可能（最大99分59秒）
- **カウントダウン**: 設定した時間からカウントダウン
- **表示形式**: MM:SS形式で表示
- **操作**:
  - 開始: タイマーをスタート
  - 一時停止: タイマーを一時停止
  - 再開: 一時停止したタイマーを再開
  - リセット: タイマーを初期値に戻す

#### 1.2 タイマー終了時の動作
- 画面上にアラート表示
- ブラウザ通知（許可されている場合）
- 音声アラート（オプション、ミュート可能）
- 自動的に停止状態になる

### 2. ルーム機能

#### 2.1 ルーム作成
- ランダムなルームIDを自動生成（例: ABC-123-XYZ）
- ルーム作成時に初期設定を指定可能:
  - タイマー時間
  - ルーム名（オプション）
- 作成後、ルームURLを自動生成
- URLコピー機能

#### 2.2 ルーム参加
- 2つの参加方法:
  1. ルームIDを入力して参加
  2. 共有されたURLから直接参加
- 参加時にユーザー名を入力（オプション）
- 既に開始されているタイマーに同期

#### 2.3 ルーム管理
- 参加者一覧の表示
- オンライン状態の表示
- ルームから退出
- ルーム削除（作成者のみ、Phase 4で実装）

### 3. リアルタイム同期

#### 3.1 タイマー状態の同期
- すべての参加者で同じタイマー状態を共有
- 操作の即座な反映:
  - 開始/停止
  - リセット
  - 時間変更
- タイムラグを最小化（Firebase Realtime Database使用）

#### 3.2 参加者の同期
- 新規参加者のリアルタイム表示
- 退出者の自動削除
- オンライン/オフライン状態の更新

### 4. UI/UX機能

#### 4.1 レスポンシブデザイン
- モバイル対応（スマートフォン、タブレット）
- デスクトップ対応
- タッチ操作に最適化

#### 4.2 テーマ
- ライトモード（デフォルト）
- ダークモード
- システム設定に従う（オプション）
- 設定をローカルに保存

#### 4.3 アニメーション
- 数字の変更時のアニメーション
- ボタンのホバー/クリックエフェクト
- 状態遷移のスムーズなトランジション
- タイマー終了時のアラートアニメーション

## 追加機能（Phase 4）

### 5. ユーザー機能

#### 5.1 ユーザー名
- 参加時にユーザー名を設定
- ユーザー名の変更
- ローカルストレージに保存（次回自動入力）

#### 5.2 参加者リスト
- 現在の参加者一覧
- ユーザー名表示
- オンライン状態表示
- 参加時刻表示

### 6. タイマー履歴

#### 6.1 履歴記録
- 完了したタイマーの履歴を保存
- 履歴項目:
  - 開始時刻
  - 設定時間
  - 実際の経過時間
  - ルーム名

#### 6.2 履歴表示
- 履歴一覧表示
- 日付でグループ化
- 履歴から時間設定を再利用

### 7. プリセット機能

#### 7.1 デフォルトプリセット
- 5分
- 10分
- 15分
- 25分（ポモドーロ）
- 30分
- 60分

#### 7.2 カスタムプリセット
- ユーザー独自のプリセット作成
- プリセット名の設定
- プリセットの編集・削除
- ローカルストレージに保存

## 将来的な機能（検討中）

### 8. 高度な機能

#### 8.1 インターバルタイマー
- 作業時間と休憩時間を交互に繰り返す
- ポモドーロテクニック対応
- ラウンド数の設定

#### 8.2 統計機能
- タイマー使用統計
- 日別・週別の集計
- グラフ表示

#### 8.3 SNS連携
- タイマー終了をツイート
- ルーム招待のソーシャルシェア

#### 8.4 音声カスタマイズ
- アラート音の選択
- カスタム音声のアップロード

#### 8.5 権限管理
- ルームの公開/非公開設定
- 操作権限の管理（観覧のみ、操作可能）

## 非機能要件

### パフォーマンス
- 初回ロード: 3秒以内
- 操作反映: 200ms以内
- 同期遅延: 500ms以内

### セキュリティ
- HTTPS通信
- Firebase Rulesによるアクセス制御
- XSS対策

### 互換性
- モダンブラウザ対応（Chrome, Firefox, Safari, Edge）
- 最新2バージョンをサポート
- iOS Safari, Android Chrome対応

### アクセシビリティ
- キーボード操作対応
- スクリーンリーダー対応（ARIA属性）
- 十分なコントラスト比
